!function(e){"use strict";e.fn.faba=function(a){var t,o,i,n,r,s,l,d,p,c,u,f,b,h,m,v,g,x,y,w,k,H,I,L,A,C,O,D,S,T,B,R,N,F,P,_,z,q,V,M,W,U,j,Q,X,Y,$,Z,E,G,J,K,ee,ae={appID:"",token:"",account:"",albumsCachePath:"",metaCachePath:"",albumsTitle:"Galleries",fixedSize:!1,photosContainerLoad:320,photosLayout:"flex",photoWidth:220,photoHeight:240,photosPerPage:25,photoAnimation:"HorizontalSlide",photoMarginHorizontal:5,photoMarginVertical:5,photosSroll:400,showCaption:!0,photoDesc:"Description",fbLinkText:"Open In Facebook",skipPhotos:[],correctPageNum:{},comments:!0,commentsLimit:5,commentsMore:"Load More",noCommentsText:"There are no comments for this photo",commentsFaces:!0,lineLoad:480,photoHoverAnimations:{overlay:"expand",button:"shrink",duration:{image:1500,overlay:650,button:650}},css:{overlay:"",viewAlbum:"",buttons:"",viewAlbumHover:"",photosContainer:"",preloaderCircle:"",preloaderRotator:""},albLimit:15,albumWidth:300,albumHeight:260,albumsSort:"desc",albumAnimation:"HorizontalSlide",albumMarginHorizontal:10,albumMarginVertical:10,albumsScroll:400,keepAlbumOrder:!0,albumView:"View <span>&rarr;</span>",skipAlbums:[],albumsCount:1,albumsLoad:"expand",albumsLoadDuration:650,albumsHoverAnimations:{image:"shrink",overlay:"expand",button:"slideDown",badge:"slideUpLong",duration:{image:830,overlay:600,button:450,badge:600}},autoplay:!1,autoplayPauseText:"Pause Autoplay",autoplayResumeText:"Resume Autoplay",autoplaySpeed:5e3,cacheData:!1,cacheSpeed:4700,loadFromCache:!1,showPageNumbers:!0,singleAlbum:!1,debugging:!1,lightbox:{fadeDuration:500,fitImagesInViewport:!0,positionFromTop:10,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,maxWidth:null,maxHeight:null,disableScrolling:!1,albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1},callbacks:{albumsLoading:function(e,a){},albumsLoaded:function(e,a,t){},albumOpened:function(e){},albumsNavigate:function(e,a,t){},albumHovered:function(e,a){},photosLoading:function(e){},photosLoaded:function(e,a){},photoChange:function(e){},photosNavigate:function(e,a,t){},photoHovered:function(e,a){}}},te=e.extend({},ae,a),oe=e("#faba"),ie=void 0,ne=void 0,re={},se=1,le=!0,de={},pe={},ce={},ue={},fe={},be={},he={},me={},ve={},ge=0,xe=!1,ye=!1,we=[],ke={},He={current:0,total:0};function Ie(){t=te.token,o=te.albumsTitle,i=te.albLimit,n=te.photosPerPage,r=te.showCaption,s=te.photoDesc,l=te.commentsLimit,d=te.commentsMore,p=te.comments,c=te.photosLayout,u=te.fixedSize,f=te.photoWidth,b=te.photoHeight,h=te.skipAlbums,m=te.skipPhotos,v=te.albumWidth,g=te.albumHeight,x=te.photosContainerLoad,y=te.lineLoad,w=te.albumsScroll,k=te.photosSroll,H=te.albumView,de={overlay:te.css.overlay?te.css.overlay:"",viewAlbum:te.css.viewAlbum?te.css.viewAlbum:"",viewAlbumHover:te.css.viewAlbumHover?te.css.viewAlbumHover:"",buttons:te.css.buttons?te.css.buttons:"",photosContainer:te.css.photosContainer?te.css.photosContainer:"",preloaderCircle:te.css.preloaderCircle?te.css.preloaderCircle:"",preloaderRotator:te.css.preloaderRotator?te.css.preloaderRotator:""},I=te.account,L=te.albumsCount,C=te.albumAnimation,O=te.albumsLoad,D=te.albumsLoadDuration,S=te.photoAnimation,A=te.albumsSort,pe={image:te.albumsHoverAnimations.image?te.albumsHoverAnimations.image:"dropDown",overlay:te.albumsHoverAnimations.overlay?te.albumsHoverAnimations.overlay:"expand",button:te.albumsHoverAnimations.button?te.albumsHoverAnimations.button:"shrink",badge:te.albumsHoverAnimations.badge?te.albumsHoverAnimations.badge:"slideLeft",duration:{image:te.albumsHoverAnimations.duration&&te.albumsHoverAnimations.duration.image?te.albumsHoverAnimations.duration.image:1e3,overlay:te.albumsHoverAnimations.duration&&te.albumsHoverAnimations.duration.overlay?te.albumsHoverAnimations.duration.overlay:600,button:te.albumsHoverAnimations.duration&&te.albumsHoverAnimations.duration.button?te.albumsHoverAnimations.duration.button:450,badge:te.albumsHoverAnimations.duration&&te.albumsHoverAnimations.duration.badge?te.albumsHoverAnimations.duration.badge:650}},ce={overlay:te.photoHoverAnimations.overlay?te.photoHoverAnimations.overlay:"expand",button:te.photoHoverAnimations.button?te.photoHoverAnimations.button:"shrink",duration:{image:te.photoHoverAnimations.duration&&te.photoHoverAnimations.duration.image?te.photoHoverAnimations.duration.image:1500,overlay:te.photoHoverAnimations.duration&&te.photoHoverAnimations.duration.overlay?te.photoHoverAnimations.duration.overlay:650,button:te.photoHoverAnimations.duration&&te.photoHoverAnimations.duration.button?te.photoHoverAnimations.duration.button:650}},ue={album:{in:"",out:""},photos:{in:"",out:""},albumsLoad:{in:"",out:"",duration:D},albumsHover:{image:{in:"",out:"",duration:pe.duration.image},overlay:{in:"",out:"",duration:pe.duration.overlay},button:{in:"",out:"",duration:pe.duration.button},badge:{in:"",out:"",duration:pe.duration.badge}},photoHover:{image:{duration:ce.duration.image},overlay:{in:"",out:"",duration:ce.duration.overlay},button:{in:"",out:"",duration:ce.duration.button}}},fe={fadeDuration:te.lightbox.fadeDuration?te.lightbox.fadeDuration:500,fitImagesInViewport:!te.lightbox.fitImagesInViewport||te.lightbox.fitImagesInViewport,positionFromTop:te.lightbox.positionFromTop?te.lightbox.positionFromTop:50,resizeDuration:te.lightbox.resizeDuration?te.lightbox.resizeDuration:700,showImageNumberLabel:!te.lightbox.showImageNumberLabel||te.lightbox.showImageNumberLabel,wrapAround:!!te.lightbox.wrapAround&&te.lightbox.wrapAround,maxWidth:te.lightbox.maxWidth?te.lightbox.maxWidth:"",maxHeight:te.lightbox.maxHeight?te.lightbox.maxHeight:"",disableScrolling:!!te.lightbox.disableScrolling&&te.lightbox.disableScrolling,albumLabel:te.lightbox.albumLabel?te.lightbox.albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!!te.lightbox.alwaysShowNavOnTouchDevices&&te.lightbox.alwaysShowNavOnTouchDevices},be={albumsLoading:"function"==typeof te.callbacks.albumsLoading?te.callbacks.albumsLoading:"",albumsLoaded:"function"==typeof te.callbacks.albumsLoaded?te.callbacks.albumsLoaded:"",albumOpened:"function"==typeof te.callbacks.albumOpened?te.callbacks.albumOpened:"",albumsNavigate:"function"==typeof te.callbacks.albumsNavigate?te.callbacks.albumsNavigate:"",albumHovered:"function"==typeof te.callbacks.albumHovered?te.callbacks.albumHovered:"",photosLoading:"function"==typeof te.callbacks.photosLoading?te.callbacks.photosLoading:"",photosLoaded:"function"==typeof te.callbacks.photosLoaded?te.callbacks.photosLoaded:"",photoChange:"function"==typeof te.callbacks.photoChange?te.callbacks.photoChange:"",photosNavigate:"function"==typeof te.callbacks.photosNavigate?te.callbacks.photosNavigate:"",photoHovered:"function"==typeof te.callbacks.photoHovered?te.callbacks.photoHovered:""},N=te.autoplay,F=te.autoplaySpeed,P=te.autoplayPauseText,_=te.autoplayResumeText,z=te.cacheData,q=te.cacheSpeed,V=te.loadFromCache,M=te.appID,W=te.showPageNumbers,U=te.singleAlbum,j=te.debugging,Q=te.albumMarginHorizontal,X=te.albumMarginVertical,Y=te.photoMarginHorizontal,$=te.photoMarginVertical,Z=te.fbLinkText,E=te.commentsFaces,G=te.noCommentsText,te.lightboxlayout,J=te.correctPageNum,K=te.albumsCachePath,ee=te.metaCachePath}function Le(e,a){a||console.log(ke.total+" API Calls Made"),e&&console.log(e)}function Ae(e,a,t,o,i){o?(ue[t][o].in=e,ue[t][o].out=a,ue[t][o].duration=i):(ue[t].in=e,ue[t].out=a)}function Ce(e,a,t){var o;switch(e.duration&&(o=e.duration),e.duration&&e.duration[t]&&(o=e.duration[t]),t?e=e[t]:t=!1,e){case"slideUp":Ae("transition.slideUpIn","transition.slideDownOut",a,t,o);break;case"slideLeft":Ae("transition.slideLeftIn","transition.slideRightOut",a,t,o);break;case"slideRight":Ae("transition.slideRightIn","transition.slideLeftOut",a,t,o);break;case"slideDown":Ae("transition.slideDownIn","transition.slideUpOut",a,t,o);break;case"slideUpLong":Ae("transition.slideUpBigIn","transition.slideDownBigOut",a,t,o);break;case"slideLeftLong":Ae("transition.slideLeftBigIn","transition.slideRightBigOut",a,t,o);break;case"slideRightLong":Ae("transition.slideRightBigIn","transition.slideLeftBigOut",a,t,o);break;case"slideDownLong":Ae("transition.slideDownBigIn","transition.slideUpBigOut",a,t,o);break;case"flipX":Ae("transition.flipXIn","transition.flipXOut",a,t,o);break;case"flipY":Ae("transition.flipYIn","transition.flipYOut",a,t,o);break;case"flipYBounce":Ae("transition.flipBounceYIn","transition.flipBounceYOut",a,t,o);break;case"flipXBounce":Ae("transition.flipBounceXIn","transition.flipBounceXOut",a,t,o);break;case"expand":Ae("transition.expandIn","transition.expandOut",a,t,o);break;case"swoop":Ae("transition.swoopIn","transition.swoopOut",a,t,o);break;case"whirl":Ae("transition.whirlIn","transition.whirlOut",a,t,o);break;case"shrink":Ae("transition.shrinkIn","transition.shrinkOut",a,t,o);break;case"bounce":Ae("transition.bounceIn","transition.bounceOut",a,t,o);break;case"bounceDown":Ae("transition.bounceDownIn","transition.bounceDownOut",a,t,o);break;case"bounceLeft":Ae("transition.bounceLeftIn","transition.bounceLeftOut",a,t,o);break;case"bounceRight":Ae("transition.bounceRightIn","transition.bounceRightOut",a,t,o);break;case"verticalBounce":Ae("transition.bounceUpIn","transition.bounceDownOut",a,t,o);break;case"horizontalBounce":Ae("transition.bounceLeftIn","transition.bounceRightOut",a,t,o);break;case"dropDown":Ae("transition.perspectiveUpIn","transition.perspectiveUpOut",a,t,o);break;case"dropUp":Ae("transition.perspectiveDownIn","transition.perspectiveDownOut",a,t,o);break;case"dropLeft":Ae("transition.perspectiveLeftIn","transition.perspectiveLeftOut",a,t,o);break;case"dropRight":Ae("transition.perspectiveRightIn","transition.perspectiveRightOut",a,t,o);break;case"swoop":Ae("transition.swoopIn","transition.swoopOut",a,t,o);break;case"expand":Ae("transition.expandIn","transition.expandOut",a,t,o);break;case"shrink":Ae("transition.shrinkIn","transition.shrinkOut",a,t,o);break;case"HorizontalSlide":"album"===a?Ae("transition.expandIn","transition.expandOut",a,t,o):Ae("transition.slideLeftIn","transition.SlideRightOut",a,t,o);break;case"VerticalSlide":"album"===a?Ae("transition.expandIn","transition.expandOut",a,t,o):Ae("transition.slideUpIn","transition.slideDownOut",a,t,o)}}function Oe(){Ce(C,"album"),Ce(S,"photos"),Ce(O,"albumsLoad"),Ce(pe,"albumsHover","image"),Ce(pe,"albumsHover","overlay"),Ce(pe,"albumsHover","button"),Ce(pe,"albumsHover","badge"),Ce(ce,"photoHover","overlay"),Ce(ce,"photoHover","button")}function De(){lightbox.option({fadeDuration:fe.fadeDuration,alwaysShowNavOnTouchDevices:fe.alwaysShowNavOnTouchDevices,albumLabel:fe.albumLabel,disableScrolling:fe.disableScrolling,fitImagesInViewport:fe.fitImagesInViewport,maxWidth:fe.maxWidth,maxHeight:fe.maxHeight,positionFromTop:fe.positionFromTop,resizeDuration:fe.resizeDuration,showImageNumberLabel:fe.showImageNumberLabel,wrapAround:fe.wrapAround})}function Se(a){void 0===ne?(null==!navigator.userAgent.match(/chrome/i)&&(X+=5),(ne=new Freewall("#faba-inner")).reset({selector:".fb-album",gutterX:Q,gutterY:X,cellW:v,cellH:g,keepOrder:le,fixSize:u,onResize:function(){if(ne.refresh(),e(window).width()>400&&e(window).width()<615)var a=setInterval(function(){var t;t=335*oe.find(".fb-album").length,oe.find("#faba-inner").height(t),oe.find(".fb-album").each(function(){var a=e(this);if(0!=a.index()){var t=a.index(),o=oe.find(".fb-album").eq(t-1).css("top");o=parseInt(o,10),a.css("top",o+335)}}),335*oe.find(".fb-album").length==oe.find("#faba-inner").outerHeight()&&clearInterval(a)},100)},onBlockResize:function(e){var a=e.height;oe.find(".fb-wrap").height(a-35)}}),ne.fitWidth(),e(window).trigger("resize"),ne.prepend(a)):ne.prepend(a)}function Te(a,o,i,n,r,s){var l="";FB.api("/"+i+"/photos",{access_token:t,fields:"images",limit:1},function(a){if(a.data&&!a.error){a.data[0].images[5]&&a.data[0].images[5].width>v?l=a.data[0].images[5].source:a.data[0].images[4]&&a.data[0].images[4].width>v?l=a.data[0].images[4].source:a.data[0].images[3]&&a.data[0].images[3].width>v?l=a.data[0].images[3].source:a.data[0].images[2]&&a.data[0].images[2].width>v?l=a.data[0].images[2].source:a.data[0].images[1]&&(l=a.data[0].images[1].source),e("#a"+i).find("img").attr("src",l),e("#a"+i).find(".fb-album-img").css("background-image","url("+l+")");var t=e("#a"+i);t.parent().find("h4").outerHeight(!0)>35&&t.parent().find("h4").outerHeight(!0);oe.width()<1280?t.height(g-35-X):t.height(g),He.current=He.current+1,j&&(ke.total=ke.total+1,Le("Thumb image for Album "+i+" has been successfully replaced!"))}else console.log(a.error)});var d='<div class="fb-album hidden">';d+="<h4>"+o+"</h4>",d+='<div class="fb-wrap" id="a'+i+'"> \t\t    <div class="fb-album-img imgdiv"></div> \t\t    <img class="imgdiv" src="'+l+'" alt="'+o+'" /> \t\t    <span class="ovlpic"> \t\t      <a class="fbp-view" href="'+i+'">'+H+'</a> \t\t    </span> \t\t    <span class="badge">'+r+" photos</span> \t\t    </div>",Se(d+="</div>"),j&&Le("Album "+i+" successfully added!",!0)}function Be(a,t,o,i,n,r){if(e(o).not(":visible")&&e(o).css("display","inline-block"),e(i).not(":visible")&&e(i).css("display","inline-block"),r){var s=parseInt(r.text(),10);n=s,a=L,e("#pagination").find('li[data-id="'+s+'"]').addClass("active").siblings().removeClass("active")}2==a&&"prev"===t?e(o).css("display","none"):"next"===t&&e(o).not(":visible")&&e(o).css("display","inline-block"),1==n&&e(o).css("display","none"),a===n?e(i).css("display","none"):a<n&&e(i).css("display","inline-block"),1==a&&(e(o).css("display","none"),e(i).css("display","none"))}function Re(a){if(!he[R][a]){var t=e("a[data-lightbox]").first().attr("href");z&&(-1==we.indexOf(t)?we=t:(delete he[R][a],a-=1)),he[R][a]={html:e(".fbp-container").html(),next:void 0!=e("#phnx").attr("href")?e("#phnx").attr("href"):"",previous:void 0!=e("#phpr").attr("href")?e("#phpr").attr("href"):"",unique:t},B=a,xe=!1}}function Ne(a){me[a]||(me[a]={html:e("#faba-inner").html(),next:void 0!=e("#aphnx").attr("href")?e("#aphnx").attr("href"):"",previous:void 0!=e("#aphpr").attr("href")?e("#aphpr").attr("href"):""})}function Fe(a,t){var o;return o="next"===t?a+1:a-1,"object"==typeof a&&(o=e(".fb-first").text(),o=parseInt(o,10)),o}function Pe(){oe.find(".fb-album h4").each(function(){var a=e(this);if(a.outerHeight(!0)>35){var t=a.parent().find(".fb-wrap"),o=t.outerHeight(!0)-(a.outerHeight(!0)-35);t.height(o)}})}function _e(e){var a=e,t='<img class="imgdiv" src="'+a.find(".imgdiv").attr("src")+'" alt="'+a.find(".imgdiv").attr("alt")+'" /> \t\t  \t <span class="ovlpic"> \t\t  \t   <a class="fbp-view" href="'+a.find(".fbp-view").attr("href")+'">'+a.find(".fbp-view").html()+'</a> \t\t  \t </span> \t\t  \t <span class="badge">'+a.find(".badge").html()+" photos</span>";a.find(".fb-wrap").html(t)}function ze(){"photoAlbum"===c?(f=320,b=320):"flex"===c&&(f=220,b=240),void 0===ie&&(ie=new Freewall(".fbp-container")),ie.reset({selector:".fb-pic",gutterX:Y,gutterY:$,cellW:f,cellH:b,fixSize:u,onResize:function(){ie.fitWidth()}}),ie.fitWidth()}function qe(){if(h.length){e(".fb-album");e.each(h,function(a,t){e("#a"+t).length&&e("#a"+t).remove(),e('h4:contains("'+t+'")')&&e('h4:contains("'+t+'")').closest(".fb-album").remove()}),ne.refresh()}}function Ve(a,o,i,r,s,l){var d,p,c=e(".fbp-container").outerHeight(!0),u=e("#fb-breadcrumbs #fbpt").find(".fb-first"),f=parseInt(u.text()),b=e("#pagination"),v=b.find("li.active").data("id");v=v?parseInt(v,10):parseInt(u.text(),10),"prev"===i?(u.text(f-1),v--,"album"===a&&se--):(u.text(f+1),v++,"album"===a&&se++),e("#aphpr, #aphnx, .fb-top-nav").css("display","none"),d=i,("album"===(p=a)&&"HorizontalSlide"===C||"photos"===p&&"HorizontalSlide"===S)&&("next"===d?Ae("transition.slideRightBigIn","transition.slideLeftBigOut",p,!1):Ae("transition.slideLeftBigIn","transition.slideRightBigOut",p,!1)),("album"===p&&"VerticalSlide"===C||"photos"===p&&"VerticalSlide"===S)&&Ae("transition.slideUpBigIn","transition.slideDownBigOut",p,!1),"photos"===a&&he[R]&&he[R][v]&&!0===s&&(s=he[R][v]),"albums"===a&&Ne[v]&&(s=Ne[v]),!0===s&&(s=!1),"photos"===a?(!function(a,t,o,i,r,s,l,d){var p=0,c=e("#fbp-navs"),u=e(".fbp-container"),s=u.outerHeight(!0);xe=!0,c.fadeOut(360),e('<div class="fbp-overlay" style="background: '+u.css("background-color")+";visibility: hidden; height: "+s+'px"><div class="loader"></div></div>').appendTo(".fbp-container");var f=e(".fbp-overlay"),b=[{elements:f,properties:"transition.fadeIn",options:{duration:360}},{elements:e(".fbp-container").find("a"),properties:ue.photos.out,options:{sequenceQueue:!1,stagger:5,complete:function(){f.css("visibility","visible");var t=e("#fb-breadcrumbs #fbpt").find(".fb-total").text(),r=e("#fb-breadcrumbs #fbpt").find(".fb-first").text();!1!==k&&e("#fb-breadcrumbs").velocity("scroll",{duration:k}),u.find("a").remove(),l?(e("#phpr").attr("href",l.previous),e("#phnx").attr("href",l.next),Be(t,i,"#phpr","#phnx",r),c.fadeIn(360),Ge("","",1,l)):FB.api(a,{fields:"images"},function(a){a&&!a.error?(j&&(ke.total=ke.total+1,Le("<<"+i+">> "+n+" photos  for page ("+("next"===i?o+1:o-1)+")  fetched.")),e.each(a.data,function(e,t){-1==m.indexOf(t.id)?Ge(t,a,++p,!1,r):p++}),e("#phpr").attr("href",a.paging.previous),e("#phnx").attr("href",a.paging.next),Be(t,i,"#phpr","#phnx",r),c.fadeIn(360)):(console.log(a.error),e(".fbp-overlay").append("<h3>"+a.error.message+"</h3>"))})}}}];e.Velocity.RunSequence(b)}(o,0,f,i,0,c,s),"function"==typeof be.photosLoading&&be.photosLoading(i)):function(a,o,i,n,r,s){xe=!0,re.photos=0;var l=e("#faba-inner").outerHeight(!0),d=e("#fbp-navs");d.fadeOut(360);var p=Fe(i,n),c=e("#aphnx"),u=e("#aphpr");"function"==typeof be.albumsLoading&&be.albumsLoading(p,n);e("#faba-inner .fb-album").velocity(ue.album.out,{stagger:35,complete:function(){e("body").css("overflow-x","hidden"),e("#faba-inner .fb-album").remove(),e("#faba-inner").append('<div class="fbp-overlay" style="height: '+l+'px"><div class="loader"></div></div>'),s?(j&&(ke.total=ke.total+0,Le("Albums <<"+n+">> page ("+("next"===n?i+1:i-1)+") loaded.")),Me("",d,i,o,n,r,s)):FB.api(a,{fields:"id, name, description, count, cover_photo"},function(a){if(a&&!a.error){var r=0,s=a.data.length;j&&(ke.total=ke.total+1,Le("Albums <<"+n+">> page ("+p+") loaded.")),e.each(a.data,function(l,p){-1==h.indexOf(p.id)&&-1==h.indexOf(p.name)?FB.api("/"+p.id+"/picture",{access_token:t},function(t){if(j&&(ke.total=ke.total+1,Le("Album "+p.id+" cover picture loaded.")),p.count>0){He.total=He.total+1,1==t.error.code&&Te(t.url,p.name,p.id,p.description,p.count,p.cover_photo);var l=p.id,f=p.count;re[l]=f,re.photos=re.photos+f}if(a&&a.paging.previous&&u.attr("href",a.paging.previous),a&&a.paging.next&&c.attr("href",a.paging.next),++r===s){e("#faba-inner");var b=setInterval(function(){He.total===He.current&&(clearInterval(b),Me(a,d,i,o,n,s))},100)}}):r++})}else console.log(a.error),e(".fbp-overlay").append("<h3>"+a.error.message+"</h3>")})}})}(o,u,f,i,r,s),b.find('li[data-id="'+v+'"]').addClass("active").siblings().removeClass("active")}function Me(a,t,o,i,n,r,s){s&&(ne.prepend(s.html),h.length>0&&qe(),e(".fb-wrap").each(function(){var a=e(this),t=a.attr("id");t=t.replace("a","");var o=a.find(".badge").text();o=parseInt(o,10),re[t]=o,a.parent().hasClass("active")&&(a.parent().removeClass("active"),_e(a.parent()))})),e("#faba-inner .imgdiv").waitForImages(!0).done(function(){var a,l,d,p,c,u,f,b,h,m;a=t,l=o,d=i,p=n,c=r,u=s,f=e("#aphnx"),b=e("#aphpr"),h=Fe(l,p),m=!!u,e("#faba-inner .fb-album").velocity("stop").velocity(ue.album.in,{stagger:25,begin:function(){e("#faba-inner .fbp-overlay").remove(),e("#faba-inner .fb-album").removeClass("hidden")},complete:function(){ne.refresh(),e("body").css("overflow-x",""),z&&e(".fb-album").addClass("hidden"),u&&u.previous&&b.attr("href",u.previous),u&&u.next&&f.attr("href",u.next),Ne(l+1),z&&e("#faba-inner .fb-album").removeClass("hidden"),j&&Le("All Albums on page ("+h+") have been successfully loaded.",!0),"function"==typeof be.albumsLoaded&&be.albumsLoaded(h,p,m),xe=!1,Pe()}}),!1!==w&&e("#fb-breadcrumbs").velocity("scroll",{duration:w}),Be(l,p,"#aphpr","#aphnx",c,d),a.fadeIn(360)})}function We(a,t,o,i){var r=e("#fbp-navs"),s=o.paging&&o.paging.next?o.paging.next:o.next;e("#phnx").attr("href",s),e("#phnx, #phpr").off().on("click",{i:a},ra),o.paging&&ze(),(o.paging&&o.paging.next||o.next)&&re[a]>n&&(e("#phnx").velocity("fadeIn",{duration:150}),sa(i),r.fadeIn(360))}function Ue(a,t,o){e(".fbp-overlay").css("height",t.outerHeight(!0)),t.find(".imgdiv").waitForImages(!0).done(function(){var i=e("#fb-breadcrumbs").find(".fb-first"),n=parseInt(i.text());t.find("a").velocity(ue.photos.in,{stagger:26,begin:function(){e(this).find(".hidden").removeClass("hidden"),t.find(".fbp-overlay").remove(),!1!==k&&e("#fb-breadcrumbs").velocity("scroll",{duration:k}),he[a]||(he[a]={}),R=a,Re(n)},complete:function(){var e=!!o;xe=!1,j&&Le("Album "+a+" photos succssefully loaded.",!0),"function"==typeof be.albumOpened&&be.albumOpened(a),"function"==typeof be.photosLoaded&&be.photosLoaded(n,e)}})})}function je(){if(me[U]){var a=me[U][count];re[U]=a,Qe(U)}else FB.api("/"+U,{fields:"count",access_token:t},function(a){if(a&&!a.error){if(j&&(ke.total=ke.total+1,Le("Single Album "+U+" fetched.")),a.count>0){var t=a.count;re[U]=t,Qe(U)}}else console.log(a.error),e(".fbp-overlay").append("<h3>"+a.error.message+"</h3>")})}function Qe(a){(N&&z&&N<q/2||N&&N<F/2)&&(window.clearInterval(N),N=window.setInterval(Ze,q)),a.type&&a.preventDefault();var o=e(this);a.type||(o=a);var i=U||o.attr("href"),r=e(".fbp-container"),s=e("#fb-photos"),l=U?"":o.closest(".fb-album").find("h4").text(),d=l?'<h5 class="brk">'+l+"</h5>":"",p=e("#fbp-navs");(s=e("#fb-photos")).css("display","block"),U||e(d).insertBefore("#fb-breadcrumbs #fbpt"),e("#fb-breadcrumbs #fbpt .fb-first").text(1),e("#aphnx,#aphpr, .fb-top-nav").css("display","none"),"function"==typeof be.photosLoading&&be.photosLoading(1,!1),p.fadeOut(360);var c=y/4,u=[{elements:e("#faba-inner"),properties:ue.albumsLoad.out,options:{duration:ue.albumsLoad.duration}},{elements:r,properties:{width:"20%"},options:{sequenceQueue:!1,duration:c}},{elements:r,properties:{width:"30%"},options:{duration:c}},{elements:r,properties:{width:"50%"},options:{duration:c}},{elements:r,properties:{width:"100%"},options:{duration:c}},{elements:r,properties:{height:"100%",top:90},options:{duration:x,complete:function(){r.css({position:"relative",padding:15,margin:"auto",left:0,top:0}),r.append('<div class="fbp-overlay" style="background: '+r.css("background-color")+";height: "+r.outerHeight(!0)+'px"><div class="loader"></div></div>'),he[i]?(ze(),ie.prepend(he[i][1].html),We(i,0,he[i][1],g),Ue(i,r,!0)):setTimeout(function(){FB.api("/"+i+"/photos",{fields:"images,name",access_token:t,limit:n},function(a){a&&!a.error?(j&&(ke.total=ke.total+1,Le("Album "+i+" photos fetched.")),s.find(".fb-pic").remove(),s.find("#load-more").remove(),e.each(a.data,function(e,t){-1==m.indexOf(t.id)&&Ge(t,a)}),Ue(i,r),We(i,0,a,g)):(console.log(a.error),e(".fbp-overlay").append("<h3>"+a.error.message+"</h3>"))})},30)}}}];e.Velocity.RunSequence(u);var f,b,h,v,g=(b=re[f=i],h=(b=parseInt(b))/n,v=Math.round(h),h>v&&b<500&&b>v*n&&v++,0===v&&(v=1),!e.isEmptyObject(J)&&J[f]&&(v=J[f]),v);e("#fb-breadcrumbs #fbpt .fb-total").text(g)}function Xe(a){var t=e(".fb-total").text(),o=e(".fb-first").text();return{pages:t=parseInt(t,10),paged:o=parseInt(o,10)}[a]}function Ye(){var a=e(".fbaply"),t=P;a.hasClass("active")?(a.removeClass("active"),window.clearInterval(N),t=_,xe=!0,N=!1):(a.addClass("active"),xe=!1,N=window.setInterval(Ze,F)),a.text(t)}function $e(a){var t,o=e("#faba-inner").find(".fb-album.active").last(),i=a.first();if(i.hasClass("active")){var n=o.index();if(Je.album.out(o),(t=a.eq(n+1)).hasClass("active")||a.eq(n).index()==a.last().index()){var r=Xe("pages"),s=Xe("paged");if(r>1){var l=e("#aphnx");e("#aphpr");return s<r?void na(l):void la(1,!0)}a.removeClass("active"),i.addClass("active"),t=i}else t.addClass("active")}else i.addClass("active"),t=i;z&&(R=t.find(".fb-wrap").attr("id").replace("a",""),function(){if(z&&"done"===ye){var a='<div class="fbpdone-ovl"><div class="done-inner"><h3>Paste This Data To The albums.json file</h3><textarea class="fbpdone"></textarea></div></div>',t='<div class="done-inner"><h3>Paste This Data To The photo_meta.json file</h3><textarea class="fbpmdone"></textarea></div>';oe.append(a),a=e(".fbpdone"),ve&&(e("#faba-caching").remove(),e(".fbpdone-ovl").append(t),(t=e(".fbpmdone")).text(JSON.stringify(ve)),t.on("click",function(){e(this).select()}),xe=!0,window.clearInterval(N),oe.faba.destroy(!1,!0)),he.albums=me,a.text(JSON.stringify(he)),a.on("click",function(){e(this).select()})}else if(z){var o=Xe("pages"),i=Xe("paged");o===i&&e("#a"+R).parent().index()==e(".fb-album").last().index()&&(ye="done")}}()),Je.album.over(t),setTimeout(function(){var e=t.find(".fbp-view");xe=!0,Qe(e)},pe.duration.image)}function Ze(){var a=e("#faba-inner"),t=e("#fb-photos"),o=a.find(".fb-album"),i=t.find("a[data-lightbox]");!1===xe&&(o.length&&"none"!=a.css("display")?$e(o):i.length&&"none"!=t.css("display")&&(e("a.active[data-lightbox]").length<=0&&(ge=2),2===ge?function(){var a=e("a[data-lightbox]").eq(0),t=e("a[data-lightbox]").length;if("block"===e("#lightbox").css("display")){var o=e("a.active[data-lightbox]");if(o.index()<t-1){var i=e("a[data-lightbox]").eq(o.index()+1);i.addClass("active").siblings().removeClass("active"),lightbox.changeImage(i.index()),ia(i.data("id"))}else lightbox.end(),ge=3}else a.addClass("active"),lightbox.start(a),ia(a.data("id"))}():3===ge&&function(){var a=Xe("pages"),t=Xe("paged");if(a>1)if(t<a){var o=e("#pagination").find("li.active").data("id");la((o=parseInt(o,10))+1,!0)}else Ke();else Ke()}()))}function Ee(a){if("meta"===a)var t=ee+"photo_meta.json";else t=K+"albums.json";e.ajax({url:t,beforeSend:function(e){e.overrideMimeType&&e.overrideMimeType("application/json")},async:!0,dataType:"json",success:function(e){"meta"===a?ve=e:(he=e,me=e.albums)}})}function Ge(a,t,o,i,n){""==a&&(a={images:{0:"",1:{source:""},length:2},id:"",name:""});var r=function(){var e,a;switch(c){case"flex":e=f+f*Math.random()<<0,a="";break;case"photoAlbum":f=320,b=320,e=320,a=320;break;case"custom":e=f,a=b}return{Width:e,Height:a}}(),s=e(".fbp-container"),l=(e("#fbp-navs").outerHeight(!0),r.Width),d=r.Height,p=function(e){for(var a,t=e.images,o=t.length-1;o>0;o--)t[o].width>=f&&t[o].width<f+360&&(a=t[o].source);return a}(a),u="fb-pic";u+=" fb-gal hidden";var h='<a href="'+a.images[0].source+'" data-id="'+a.id+'" data-lightbox="fbpics" data-title=""><div class="'+u+'" style="width: '+l+"px; height: "+d+"px; background-image: url("+p+')"><img class="imgdiv" src="'+p+'" alt="'+(void 0!=a.name?a.name.substr(0,20):"")+'" /><span class="ovlpic"></span><b class="lupa"></b></div></a>';if(o){i?ie.prepend(i.html):ie.prepend(h);var m=s.outerHeight(!0);s.find(".fbp-overlay").height(m),(t.data&&o===t.data.length||i)&&(ie.refresh(),s.find(".imgdiv").waitForImages(!0).done(function(){s.find(".fbp-overlay").remove(),s.find(".hidden").removeClass("hidden"),s.find("a").velocity("stop").velocity(ue.photos.in,{stagger:32,complete:function(){var e=!!i,a=Fe(s);xe=!1,i||Re(n),j&&Le("Photos successfully loaded."),"function"==typeof be.photosLoaded&&be.photosLoaded(a,e)}}).addClass("vis")}))}else s.append(h)}u=!0===u?0:null,ke.total=0;var Je={photo:{over:function(a){var t=a,o=[{elements:t.find(".imgdiv"),properties:{scaleX:1.23,scaleY:1.23,rotateZ:6},options:{duration:ue.photoHover.image.duration}},{elements:t.find(".ovlpic"),properties:ue.photoHover.overlay.in,options:{sequenceQueue:!1,duration:ue.photoHover.overlay.duration}},{elements:t.find(".lupa"),properties:ue.photoHover.button.in,options:{sequenceQueue:!1,duration:ue.photoHover.button.duration}}];if("function"==typeof be.photoHovered){var i=t.parent().attr("href");be.photoHovered(t,i)}e.Velocity.RunSequence(o)},out:function(e){var a=e;a.find(".imgdiv").velocity("stop"),a.find(".imgdiv").velocity("reverse",{duration:400}),a.find(".ovlpic").velocity("stop"),a.find(".ovlpic").velocity("reverse",{duration:ue.photoHover.overlay.duration}),a.find(".lupa").velocity("reverse",{duration:ue.photoHover.button.duration})}},album:{over:function(a){var t=a,o=[{elements:t.find(".imgdiv"),properties:ue.albumsHover.image.out,options:{duration:ue.albumsHover.image.duration}},{elements:t.find(".ovlpic"),properties:ue.albumsHover.overlay.in,options:{sequenceQueue:!1,duration:ue.albumsHover.overlay.duration}},{elements:t.find("a"),properties:ue.albumsHover.button.in,options:{sequenceQueue:!1,duration:ue.albumsHover.button.duration}},{elements:t.find(".badge"),properties:ue.albumsHover.badge.in,options:{sequenceQueue:!1,duration:ue.albumsHover.badge.duration}}];if("function"==typeof be.albumHovered){var i=t.attr("id");i=i.replace("a",""),be.albumHovered(t,i)}e.Velocity.RunSequence(o)},out:function(e){var a=e;a.find(".ovlpic").velocity("stop"),a.find(".ovlpic").velocity("reverse",{duration:ue.albumsHover.overlay.duration}),a.find(".badge").velocity("stop"),a.find(".badge").velocity("reverse",{duration:ue.albumsHover.badge.duration}),a.find(".imgdiv").velocity("stop"),a.find(".imgdiv").velocity(ue.albumsHover.image.in)}}};function Ke(){var a=e(".fbp-container"),t=e("#fb-photos");if(a.find("a").length>0&&!U){e("#pagination").find("li").remove(),a.find("a").remove();var o=e("#fb-breadcrumbs"),i=e("#faba-inner");o.find(".brk").remove(),o.find("#fbpt .fb-first").text(se),o.find("#fbpt .fb-total").text(L),e("#phpr, #phnx").css("display","none"),a.css({padding:0,width:"100%",left:0,position:"absolute"}),a.velocity({height:10},{duration:x,sequenceQueue:!1,complete:function(){var n=[{elements:a,properties:{width:0},options:{duration:y}},{elements:i,properties:ue.albumsLoad.in,options:{duration:ue.albumsLoad.duration,complete:function(){t.css("display","none");var a=e("#pagination");if(!1!==w&&o.velocity("scroll",{duration:w}),L>1){se<L&&e("#aphnx").css("display","inline-block"),se>1&&e("#aphpr").css("display","inline-block"),sa(L);var i=e(".fb-first").text();a.find('li[data-id="'+i+'"]').addClass("active").siblings().removeClass("active"),e("#fbp-navs").fadeIn(320)}setTimeout(function(){ne.refresh()},120)}}}];e.Velocity.RunSequence(n)}})}}function ea(a,t,o,i,n,r,s){var l;if(!1===o&&!1===i)l=ve[a+"-comments"];else{var p=i.created_time,c=s?'<img src="'+s.data.url+'" />':"";p=(p=p.split("T"))[0],p=e.timeago(p),l='<div class="fbp-com clearfix">'+c+'<p><span class="fbp-ct"><b>'+i.from.name+"</b><b>"+p+"</b></span>"+i.message+"</p></div>"}if(t.find(".lb-details .fbp-comms").append(l),n===r){var u=t.find(".lb-details .fbp-comms").outerHeight(!0);if(ve[a+"-comments"]||(ve[a+"-comments"]=t.find(".lb-details .fbp-comms").html()),!1===o&&!1===i||o.paging.next){var f,b='<a class="fbc-lm" href="'+(f=!1===o&&!1===i?ve[a+"-comments-more"]?ve[a+"-comments-more"]:"":o.paging.next?o.paging.next:"")+'">'+d+"</a>";!ve[a+"-comments-more"]&&o&&o.paging.next&&(ve[a+"-comments-more"]=o.paging.next),f&&t.find(".fbp-comms").append(b),e("#lightboxOverlay").css("height","+="+(u+15)+"px"),j&&Le("All comments successfully loaded and added to the photo "+a,!0)}}}function aa(a,o){var i=0,n=e("#lightbox");if(n.find(".fbp-comms .fbc-lm").length>0&&n.find(".fbp-comms .fbc-lm").remove(),!1!==o){var r=o.data.length;e.each(o.data,function(e,s){E?FB.api("/"+s.from.id+"/picture",{access_token:t},function(e){e&&!e.error?(j&&(ke.total=ke.total+1,Le("Profile image of the commenter ("+s.from.id+") fetched.")),ea(a,n,o,s,++i,r,e)):console.log(e.error)}):ea(a,n,o,s,++i,r)})}else ea(a,n,!1,!1,1,1)}function ta(a,o){ve[a+"-comments"]?aa(a,!1):FB.api(o?"/"+a+"/comments":a,{fields:"from, message, created_time",limit:l,access_token:t},function(t){t&&!t.error?t.data.length?(j&&(ke.total=ke.total+1,Le("Comment data for the photo "+a+" successfully fetched.")),aa(a,t)):e(".fbp-comms").append('<div class="fbp-com"><p>'+G+"</p></div>"):console.log(t.error)})}function oa(a,t,o,i){if(r){if(t&&!i){var n='<a class="fbp-link" href="'+t.link+'" target="_blank">'+Z+"</a>",l=t.created_time;l=(l=l.split("T"))[0];var d='<span class="fbp-posted">Published '+(l=e.timeago(l))+"</span>";if(t.name)var p=(u=t.name,u.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1'>$1</a>"));else p="";var c='<div class="fbp-caption"><p><h3>'+s+d+"</h3>"+p+"</p>"+n+"</div>";o.find(".lb-details").prepend(c)}else if(ve[i+"-meta"]){c=ve[i+"-meta"];o.find(".lb-details").prepend(c)}j&&Le("Photo "+a+" meta content succssefully added.",!0),ve[a+"-meta"]||(ve[a+"-meta"]=c),o.find(".fbp-caption a").off().on("click",function(){var a=e(this).attr("href");window.open(a,"_blank").focus()})}var u}function ia(a){var o=e("#lightbox");o.find(".lb-details .fbp-comms").remove(),o.find(".lb-details .fbp-caption").remove(),ve&&ve[a+"-meta"]?oa(a,!1,o,a):FB.api("/"+a,{fields:"name, created_time, link",access_token:t},function(e){e&&!e.error?(j&&(ke.total=ke.total+1,Le("Photo "+a+" meta content (description, link and published date) fetched.")),oa(a,e,o)):console.log(e.error)}),!0===p&&(e('<div class="fbp-comms"></div>').appendTo(e("#lightbox .lb-details")),ta(a,!0))}function na(a){var t=e(this);a.type?a.preventDefault():t=a;var o,n=t.attr("href"),r=t.attr("id"),s=e(".fb-first").text();s=parseInt(s,10),t.hasClass("fb-top-nav")&&(r=t.hasClass("nxt")?"aphnx":"aphpr"),"aphnx"===r?(r="next",o=s+1):(r="prev",o=s-1);var l=parseInt(L,10)/i,d=Math.round(l);0==d&&(d=1);var p=!1;me[o]&&(p=me[o]),"function"==typeof be.albumsNavigate&&be.albumsNavigate(r,s,o),Ve("album",n,r,d,p)}function ra(a){a.preventDefault();var t,o=e(this),i=o.attr("href"),r=o.attr("id"),s=e(".fb-first").text();s=parseInt(s,10),o.hasClass("fb-top-nav")&&(r=o.hasClass("nxt")?"aphnx":"aphpr"),"phnx"===r?(r="next",t=s+1):(r="prev",t=s-1);var l=a.data.i,d=re[l],p=(d=parseInt(d))/n,c=Math.round(p);0===c&&(c=1),"function"==typeof be.photosNavigate&&be.photosNavigate(r,s,t),Ve("photos",i,r,c,!0)}function sa(a){var t=1;if(W){var o=e("#pagination");if(o.find("li").remove(),a>1)for(;t<=a;){var i='data-id="'+t+'"';1===t&&(i+=' class="active"'),o.append("<li "+i+"><a>"+t+"</a></li>"),t++}}}function la(a,t){var o=e("#faba-inner"),i=e("#pagination"),n=i.find("li.active");W||(n=e(".fb-first").text());var r=i.find('li[data-id="'+a+'"]'),s=W?parseInt(n.data("id"),10):parseInt(n,10),l=i.find("li").data("id");W||(l=e(".fb-total").text());var d,p=0;if(d="none"==o.css("display")?"photos":"album",l=parseInt(l,10),a>s)var c="next";else c="prev";if(V&&(B=a-1),"album"===d)var u="next"===c?e("#aphnx").attr("href"):e("#aphpr").attr("href");else u="next"===c?e("#phnx").attr("href"):e("#phpr").attr("href");if("photos"===d&&!he[R][a]||"album"===d&&!me[a]){void 0!=B&&a>B&&s<B?(Ve(d,"photos"===d?he[R][B].next:me[B].next,c,l),s=B):(t&&!xe&&(xe=!0),Ve(d,u,c,l)),"next"===c?s++:s--;var f=setInterval(function(){"next"===c&&s<a||"prev"===c&&s!=a?(e(".loader").length>0&&(u="photos"===d?"next"===c?e("#phnx").attr("href"):e("#phpr").attr("href"):"next"===c?e("#aphnx").attr("href"):e("#aphpr").attr("href"),p=1),1===p&&e(".loader").length<=0&&(p=0,t&&!xe&&(xe=!0),Ve(d,u,c,l,!1),r.addClass("active").siblings().removeClass("active"),"next"===c?s++:s--)):(clearInterval(f),r.addClass("active").siblings().removeClass("active"),e(".fb-first").text(a))},30)}else Ve(d,u,c,l,"photos"===d?he[R][a]:me[a]),e(".fb-first").text(a),r.addClass("active").siblings().removeClass("active")}function da(){var a=parseInt(L),t=a/i;t<1&&(t=1);var o=Math.round(t);t>o&&a>o*i&&o++,L=o,e("body").css("overflow-x","hidden"),j&&Le("Fetching albums thumbs...")}function pa(a,t){var o=e("#faba-inner");o.find(".imgdiv").waitForImages(!0).done(function(){o.find(".fb-album").velocity("stop").velocity(ue.album.in,{stagger:32,begin:function(){o.find(".fbp-overlay").remove(),e("#aphnx").attr("href",t?a.next:a.paging.next),Ne(1),o.find(".fb-album").removeClass("hidden")},complete:function(){ne.refresh(),e("body").css("overflow-x","");var a=!!t;"function"==typeof be.albumsLoaded&&be.albumsLoaded(1,!1,a),xe=!1,Pe()}}),(a.paging&&a.paging.next||a.next)&&L>1&&(e("#aphnx").velocity("fadeIn",{duration:600}),sa(L)),t&&e(".fb-wrap").each(function(){var a=e(this),t=a.attr("id");t=t.replace("a","");var o=a.find(".badge").text();o=parseInt(o,10),re[t]=o});var i=e(".fb-album").eq(0).find("h4"),n=".fb-album .fb-wrap{height: "+(g-i.outerHeight(!0))+"px}";n+="#faba-inner, #fb-photos{min-height: "+g+"px}",n+="#faba{min-height: "+g+"px}",e("html").find('head style[data-id="fbp"]').append(n)})}function ca(){xe=!0,re.photos=0,"function"==typeof be.albumsLoading&&be.albumsLoading(1,!1),V&&Ee("meta"),me[1]?(da(),Se(me[1].html),h.length>0&&qe(),pa(me[1],!0),e("#fbp-navs").prepend('<a id="aphpr">Previous</a><a id="aphnx">Next</a>'),e("#fb-breadcrumbs #fbpt .fb-total").text(L)):FB.api(I+"/albums","GET",{fields:"id, name, description, count,cover_photo",limit:i,access_token:t},function(a){if(a&&!a.error){var o=0,i=a.data.length;j&&(ke.total=ke.total+1,Le("Albums for the 1st page fetched.")),da(),"random"!=A&&(a.data.sort(function(e,a){if(e.cover_photo&&a.cover_photo)return e.id-a.id}),"asc"==A&&a.data.reverse()),e.each(a.data,function(n,r){-1==h.indexOf(r.id)&&-1==h.indexOf(r.name)?FB.api("/"+r.id+"/picture",{access_token:t},function(t){if(j&&(ke.total=ke.total+1,Le("Album "+r.id+" thumb image fetched.")),r.count>0){He.total=He.total+1,1==t.error.code?Te(t.url,r.name,r.id,r.description,r.count,r.cover_photo):Te(t.data.url,r.name,r.id,r.description,r.count,r.cover_photo);var n=r.id,s=r.count;re[n]=s,re.photos=re.photos+s}if(++o===i){var l=setInterval(function(){He.total===He.current&&(clearInterval(l),pa(a))},100);if(z){var d=function(){var e=oe.find(".fb-album").length,a=re.photos,t=a*(q/2)-a*fe.fadeDuration-e*pe.duration.image-D-y;t/=t>360?360:60;var o=new Date,i=new Date(o.getTime()+1e3*t),n=i.getHours()+":"+i.getMinutes();return{min:(t/=60).toFixed(2),time:n}}();e("#cache-time").text(d.time),e("#cache-min").text(d.min+" min")}}}):o++}),e("#fbp-navs").prepend('<a id="aphpr">Previous</a><a id="aphnx">Next</a>'),e("#fb-breadcrumbs #fbpt .fb-total").text(L)}else console.log(a.error),e(".fbp-overlay").length<=0&&e("#faba-inner").append('<div class="fbp-overlay" style="height: 100%"><div class="loader"></div></div>'),e(".fbp-overlay").append("<h3>"+a.error.message+"</h3>")})}function ua(){if(N&&!z){N=window.setInterval(Ze,F);var a='<a class="fbaply">Autoplay</a>';e("#fb-breadcrumbs").append(a),e("#lightbox").append(a),(a=e(".fbaply")).on("click",Ye),a.addClass("active").text(P)}z&&(clearInterval(N),N=window.setInterval(Ze,q),V=!1,oe.append('<div id="faba-caching"><div><h1>Caching Data...</h1><h3>Please be patient, it can take time depending on number of albums+photos you are caching.</h3><h4>It will take approximetly <span id="cache-min">(calculating...)</span></h4><h5>Come back at <span id="cache-time"></span> it should be done.</h5></div></div>')),V&&(he={},Ee())}function fa(){var a='<style type="text/css" data-id="fbp">';de.overlay&&(a+=".fbp-overlay{background:"+de.overlay+"}"),de.photosContainer&&(a+=".fbp-container{background:"+de.photosContainer+"}"),de.viewAlbum&&(a+=".fb-album .ovlpic a{"+de.viewAlbum+"}"),de.viewAlbumHover&&(a+=".fb-album .ovlpic a:hover{"+de.viewAlbumHover+"}"),de.buttons&&(a+="#phpr, #phnx, #aphpr, #aphnx{"+de.buttons+"}"),de.preloaderCircle&&(a+=".loader{border: 8px solid "+de.preloaderCircle+"}"),de.preloaderRotator&&(a+=".loader{border-left: 8px solid "+de.preloaderRotator+"}"),a+="</style>",e("html").find("head").append(a)}function ba(){if(V)var e=setInterval(function(){me[1]&&(clearInterval(e),U?je():ca())},100);else U?je():ca()}e.fn.faba.hoverAlbum=function(a,t){var o=e("#a"+a);"over"===t?Je.album.over(o):Je.album.out(o)},e.fn.faba.openAlbum=function(a){$link=e("#a"+a).find(".fbp-view"),Qe($link)},e.fn.faba.closeAlbum=function(){Ke()},e.fn.faba.reset=function(a){var t=e("#faba-inner");e(".fbaply").length&&e(".fbaply").remove(),me={},he={},te=e.extend({},ae,a),Ie(),Oe(),De(),ua(),fa(),t.find(".fb-album").each(function(){_e(e(this))})},e.fn.faba.albumsReInit=function(){Ke(),e(".fb-album").length&&e("#faba-inner .fb-album").remove(),ba()},e.fn.faba.destroy=function(a,t){e("#breadcrumbs").off(),e("#faba").off(),e("#faba-inner").off(),e("#fbgh").off(),e("#fb-photos").off(),e("#lightbox").off(),a&&e("#faba").remove(),t&&e("#faba-inner, #fb-photos").remove()},e.ajaxSetup({cache:!0}),e.getScript("https://connect.facebook.net/en_US/sdk.js",function(){var a,t,i;FB.init({appId:M,xfbml:!0,version:"v2.5"}),a=e("#faba-inner"),(t=e("#lightbox")).find(".lb-dataContainer"),i=e("#fb-photos"),Ie(),Oe(),e("#faba").hoverIntent({over:function(){var a=e(this);Je.photo.over(a)},out:function(){var a=e(this);Je.photo.out(a)},selector:".fbp-container a .fb-pic",interval:60}),e("#faba-inner").hoverIntent({over:function(){var a=e(this);Je.album.over(a)},out:function(){var a=e(this);Je.album.out(a)},selector:".fb-album .fb-wrap",interval:45}),De(),ua(),fa(),e("#fbgh").text(o),oe.on("click","#pagination li a",function(){var a=e(this).parent().data("id");la(a=parseInt(a,10))}),oe.on("click","#aphpr,#aphnx",na),i.on("click","a[data-lightbox]",function(){ia(e(this).data("id")),T=e(this).index()}),e("#fbgh").on("click",Ke),a.on("click",".fbp-view",Qe),t.find(".lb-dataContainer").on("click",".fbc-lm",function(){ta(e(this).attr("href"))}),t.find(".lb-nav a").on("click",function(){var a=T;if(e(this).hasClass("lb-next")){var t=e("a[data-lightbox]").eq(a+1).data("id");T++}else{var t=e("a[data-lightbox]").eq(a-1).data("id");T--}ia(t),"function"==typeof be.photoChange&&be.photoChange(t)}),a.append('<div class="fbp-overlay" style="height: 100%"><div class="loader"></div></div>'),ba()})}}(jQuery);